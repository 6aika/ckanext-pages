{% extends 'ckanext_pages/edit_base.html' %} 

{% block page_primary_action %}
  {% if h.check_access('ckanext_pages_update', {}) %}
    {% link_for _('Add page'), controller='ckanext.pages.controller:PagesController', action='pages_edit', page='', class_='btn btn-primary', icon='plus-sign-alt' %}
  {% endif %}
{% endblock %}

{% block primary_content_inner %}
  {% set pages_total = c.pages_dict|length %}
  <h1 class="hide-heading">{{ _('Pages') }}</h1>
  <h2>{{ _('1 page') if pages_total == 1 else _('{0} pages').format(pages_total) }}</h2>
  <hr>
  <ul class="dataset-list unstyled">
    {% for page in c.pages_dict %}
      <li class="dataset-item">
        <h3 class="dataset-heading">
          <a href="{{ h.url_for(controller='ckanext.pages.controller:PagesController', action='pages_show', page='/' + page.name) }}" >{{ page.title }}</a>
        </h3>
        {% if page.content %}
          {{ h.markdown_extract(page.content) }}
        {% else %}
          <p class="empty">{{ _('This page currently has no content') }}</p>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% endblock %}
